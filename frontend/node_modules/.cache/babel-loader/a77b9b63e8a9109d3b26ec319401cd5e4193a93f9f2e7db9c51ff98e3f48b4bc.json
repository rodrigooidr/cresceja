{"ast":null,"code":"var _jsxFileName = \"C:\\\\Projetos App\\\\cresceja\\\\frontend\\\\src\\\\components\\\\TrialTopBanner.jsx\",\n  _s = $RefreshSig$();\n// src/components/TrialTopBanner.jsx\nimport React, { useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport api from \"../api/api\";\nimport TrialDaysLabel from \"./TrialDaysLabel\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function TrialTopBanner() {\n  _s();\n  const [dismissed, setDismissed] = useState(() => localStorage.getItem(\"hide_trial_banner\") === \"1\");\n  const [status, setStatus] = useState(null);\n  useEffect(() => {\n    let mounted = true;\n    (async () => {\n      try {\n        const {\n          data\n        } = await api.get(\"/api/subscription/status\");\n        if (mounted) setStatus(data || null);\n      } catch {\n        // ok: se falhar, caímos no TrialDaysLabel\n      }\n    })();\n    return () => mounted = false;\n  }, []);\n  if (dismissed) return null;\n\n  // tenta dias restantes do backend em formatos diferentes\n  const days = typeof (status === null || status === void 0 ? void 0 : status.daysRemaining) === \"number\" ? status.daysRemaining : typeof (status === null || status === void 0 ? void 0 : status.trial_days_left) === \"number\" ? status.trial_days_left : null;\n\n  // mostra só se for período de teste (plano free) e não expirado\n  const isFree = (status === null || status === void 0 ? void 0 : status.is_free) === true || (status === null || status === void 0 ? void 0 : status.plan) === \"free\" || (status === null || status === void 0 ? void 0 : status.plan_id) === \"free\";\n  const active = (status === null || status === void 0 ? void 0 : status.active) !== false && (status === null || status === void 0 ? void 0 : status.status) !== \"expired\";\n  if (!isFree || !active) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"w-full bg-indigo-600 text-white text-sm\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-7xl mx-auto px-4 py-2 flex items-center justify-between gap-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: typeof days === \"number\" ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [\"Seu \", /*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"teste\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 50,\n            columnNumber: 19\n          }, this), \" termina em \", /*#__PURE__*/_jsxDEV(\"b\", {\n            children: days\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 50,\n            columnNumber: 43\n          }, this), \" dia\", days === 1 ? \"\" : \"s\", \".\"]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [\"Aproveite seu \", /*#__PURE__*/_jsxDEV(TrialDaysLabel, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 29\n          }, this), \".\"]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          to: \"/checkout?plan=pro\",\n          className: \"bg-white/10 hover:bg-white/20 px-3 py-1 rounded\",\n          children: \"Assinar agora\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            localStorage.setItem(\"hide_trial_banner\", \"1\");\n            setDismissed(true);\n          },\n          className: \"px-2 py-1 hover:bg-white/10 rounded\",\n          \"aria-label\": \"Fechar banner de teste\",\n          title: \"Fechar\",\n          children: \"Fechar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 5\n  }, this);\n}\n_s(TrialTopBanner, \"oTOGyzpOUOjGMWos9Ip2ZGzjz/A=\");\n_c = TrialTopBanner;\nvar _c;\n$RefreshReg$(_c, \"TrialTopBanner\");","map":{"version":3,"names":["React","useEffect","useState","Link","api","TrialDaysLabel","jsxDEV","_jsxDEV","Fragment","_Fragment","TrialTopBanner","_s","dismissed","setDismissed","localStorage","getItem","status","setStatus","mounted","data","get","days","daysRemaining","trial_days_left","isFree","is_free","plan","plan_id","active","className","children","fileName","_jsxFileName","lineNumber","columnNumber","to","onClick","setItem","title","_c","$RefreshReg$"],"sources":["C:/Projetos App/cresceja/frontend/src/components/TrialTopBanner.jsx"],"sourcesContent":["// src/components/TrialTopBanner.jsx\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport api from \"../api/api\";\r\nimport TrialDaysLabel from \"./TrialDaysLabel\";\r\n\r\nexport default function TrialTopBanner() {\r\n  const [dismissed, setDismissed] = useState(\r\n    () => localStorage.getItem(\"hide_trial_banner\") === \"1\"\r\n  );\r\n  const [status, setStatus] = useState(null);\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    (async () => {\r\n      try {\r\n        const { data } = await api.get(\"/api/subscription/status\");\r\n        if (mounted) setStatus(data || null);\r\n      } catch {\r\n        // ok: se falhar, caímos no TrialDaysLabel\r\n      }\r\n    })();\r\n    return () => (mounted = false);\r\n  }, []);\r\n\r\n  if (dismissed) return null;\r\n\r\n  // tenta dias restantes do backend em formatos diferentes\r\n  const days =\r\n    typeof status?.daysRemaining === \"number\"\r\n      ? status.daysRemaining\r\n      : typeof status?.trial_days_left === \"number\"\r\n      ? status.trial_days_left\r\n      : null;\r\n\r\n  // mostra só se for período de teste (plano free) e não expirado\r\n  const isFree =\r\n    status?.is_free === true ||\r\n    status?.plan === \"free\" ||\r\n    status?.plan_id === \"free\";\r\n  const active = status?.active !== false && status?.status !== \"expired\";\r\n  if (!isFree || !active) return null;\r\n\r\n  return (\r\n    <div className=\"w-full bg-indigo-600 text-white text-sm\">\r\n      <div className=\"max-w-7xl mx-auto px-4 py-2 flex items-center justify-between gap-3\">\r\n        <div>\r\n          {typeof days === \"number\" ? (\r\n            <>\r\n              Seu <b>teste</b> termina em <b>{days}</b> dia{days === 1 ? \"\" : \"s\"}.\r\n            </>\r\n          ) : (\r\n            <>\r\n              Aproveite seu <TrialDaysLabel />.\r\n            </>\r\n          )}\r\n        </div>\r\n        <div className=\"flex items-center gap-2\">\r\n          <Link\r\n            to=\"/checkout?plan=pro\"\r\n            className=\"bg-white/10 hover:bg-white/20 px-3 py-1 rounded\"\r\n          >\r\n            Assinar agora\r\n          </Link>\r\n          <button\r\n            onClick={() => {\r\n              localStorage.setItem(\"hide_trial_banner\", \"1\");\r\n              setDismissed(true);\r\n            }}\r\n            className=\"px-2 py-1 hover:bg-white/10 rounded\"\r\n            aria-label=\"Fechar banner de teste\"\r\n            title=\"Fechar\"\r\n          >\r\n            Fechar\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}