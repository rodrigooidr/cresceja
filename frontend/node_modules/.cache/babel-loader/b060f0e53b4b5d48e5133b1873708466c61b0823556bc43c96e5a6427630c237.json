{"ast":null,"code":"// Instala ganchos de log e rede no window.__debugStore\n(function () {\n  if (typeof window === \"undefined\") return;\n  const store = window.__debugStore = {\n    logs: [],\n    // {ts, level, args}\n    net: [],\n    // {ts, type:'fetch'|'xhr', method,url,status,ms,body,resp}\n    max: 500\n  };\n  const push = (arr, obj) => {\n    arr.push(obj);\n    if (arr.length > store.max) arr.shift();\n  };\n\n  // intercept console\n  [\"log\", \"info\", \"warn\", \"error\"].forEach(level => {\n    const orig = console[level];\n    console[level] = function (...args) {\n      try {\n        push(store.logs, {\n          ts: Date.now(),\n          level,\n          args\n        });\n      } catch {}\n      return orig.apply(this, args);\n    };\n  });\n\n  // erros globais\n  window.addEventListener(\"error\", e => {\n    var _e$error;\n    push(store.logs, {\n      ts: Date.now(),\n      level: \"error\",\n      args: [(e === null || e === void 0 ? void 0 : e.message) || e, (e === null || e === void 0 ? void 0 : (_e$error = e.error) === null || _e$error === void 0 ? void 0 : _e$error.stack) || \"\"]\n    });\n  });\n  window.addEventListener(\"unhandledrejection\", e => {\n    push(store.logs, {\n      ts: Date.now(),\n      level: \"error\",\n      args: [\"UnhandledRejection\", e === null || e === void 0 ? void 0 : e.reason]\n    });\n  });\n\n  // fetch\n  const origFetch = window.fetch;\n  if (origFetch) {\n    window.fetch = async (input, init = {}) => {\n      const start = performance.now();\n      let url = typeof input === \"string\" ? input : input && input.url;\n      let method = init && init.method || \"GET\";\n      try {\n        const resp = await origFetch(input, init);\n        const ms = Math.round(performance.now() - start);\n        push(store.net, {\n          ts: Date.now(),\n          type: \"fetch\",\n          method,\n          url,\n          status: resp.status,\n          ms\n        });\n        return resp;\n      } catch (err) {\n        const ms = Math.round(performance.now() - start);\n        push(store.net, {\n          ts: Date.now(),\n          type: \"fetch\",\n          method,\n          url,\n          status: \"ERR\",\n          ms,\n          err: String(err)\n        });\n        throw err;\n      }\n    };\n  }\n\n  // XHR\n  const XHR = window.XMLHttpRequest;\n  if (XHR) {\n    const open = XHR.prototype.open;\n    const send = XHR.prototype.send;\n    XHR.prototype.open = function (method, url, ...rest) {\n      this.__dbg = {\n        method,\n        url\n      };\n      return open.apply(this, [method, url, ...rest]);\n    };\n    XHR.prototype.send = function (body) {\n      const start = performance.now();\n      const onEnd = () => {\n        var _this$__dbg, _this$__dbg2;\n        const ms = Math.round(performance.now() - start);\n        push(store.net, {\n          ts: Date.now(),\n          type: \"xhr\",\n          method: ((_this$__dbg = this.__dbg) === null || _this$__dbg === void 0 ? void 0 : _this$__dbg.method) || \"GET\",\n          url: (_this$__dbg2 = this.__dbg) === null || _this$__dbg2 === void 0 ? void 0 : _this$__dbg2.url,\n          status: this.status,\n          ms\n        });\n        this.removeEventListener(\"loadend\", onEnd);\n      };\n      this.addEventListener(\"loadend\", onEnd);\n      return send.apply(this, [body]);\n    };\n  }\n})();","map":{"version":3,"names":["window","store","__debugStore","logs","net","max","push","arr","obj","length","shift","forEach","level","orig","console","args","ts","Date","now","apply","addEventListener","e","_e$error","message","error","stack","reason","origFetch","fetch","input","init","start","performance","url","method","resp","ms","Math","round","type","status","err","String","XHR","XMLHttpRequest","open","prototype","send","rest","__dbg","body","onEnd","_this$__dbg","_this$__dbg2","removeEventListener"],"sources":["C:/Projetos App/cresceja/frontend/src/debug/installDebug.js"],"sourcesContent":["// Instala ganchos de log e rede no window.__debugStore\r\n(function(){\r\n  if (typeof window === \"undefined\") return;\r\n\r\n  const store = window.__debugStore = {\r\n    logs: [],    // {ts, level, args}\r\n    net: [],     // {ts, type:'fetch'|'xhr', method,url,status,ms,body,resp}\r\n    max: 500\r\n  };\r\n  const push = (arr, obj) => { arr.push(obj); if (arr.length > store.max) arr.shift(); };\r\n\r\n  // intercept console\r\n  [\"log\",\"info\",\"warn\",\"error\"].forEach(level=>{\r\n    const orig = console[level];\r\n    console[level] = function(...args){\r\n      try { push(store.logs, { ts: Date.now(), level, args }); } catch {}\r\n      return orig.apply(this, args);\r\n    };\r\n  });\r\n\r\n  // erros globais\r\n  window.addEventListener(\"error\", (e)=>{\r\n    push(store.logs, { ts: Date.now(), level: \"error\", args: [e?.message || e, e?.error?.stack || \"\"] });\r\n  });\r\n  window.addEventListener(\"unhandledrejection\", (e)=>{\r\n    push(store.logs, { ts: Date.now(), level: \"error\", args: [\"UnhandledRejection\", e?.reason] });\r\n  });\r\n\r\n  // fetch\r\n  const origFetch = window.fetch;\r\n  if (origFetch) {\r\n    window.fetch = async (input, init={})=>{\r\n      const start = performance.now();\r\n      let url = (typeof input === \"string\") ? input : (input && input.url);\r\n      let method = (init && init.method) || \"GET\";\r\n      try {\r\n        const resp = await origFetch(input, init);\r\n        const ms = Math.round(performance.now() - start);\r\n        push(store.net, { ts: Date.now(), type: \"fetch\", method, url, status: resp.status, ms });\r\n        return resp;\r\n      } catch (err) {\r\n        const ms = Math.round(performance.now() - start);\r\n        push(store.net, { ts: Date.now(), type: \"fetch\", method, url, status: \"ERR\", ms, err: String(err) });\r\n        throw err;\r\n      }\r\n    };\r\n  }\r\n\r\n  // XHR\r\n  const XHR = window.XMLHttpRequest;\r\n  if (XHR) {\r\n    const open = XHR.prototype.open;\r\n    const send = XHR.prototype.send;\r\n    XHR.prototype.open = function(method, url, ...rest){\r\n      this.__dbg = { method, url };\r\n      return open.apply(this, [method, url, ...rest]);\r\n    };\r\n    XHR.prototype.send = function(body){\r\n      const start = performance.now();\r\n      const onEnd = ()=>{\r\n        const ms = Math.round(performance.now() - start);\r\n        push(store.net, {\r\n          ts: Date.now(), type: \"xhr\",\r\n          method: this.__dbg?.method || \"GET\",\r\n          url: this.__dbg?.url, status: this.status, ms\r\n        });\r\n        this.removeEventListener(\"loadend\", onEnd);\r\n      };\r\n      this.addEventListener(\"loadend\", onEnd);\r\n      return send.apply(this, [body]);\r\n    };\r\n  }\r\n})();\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}