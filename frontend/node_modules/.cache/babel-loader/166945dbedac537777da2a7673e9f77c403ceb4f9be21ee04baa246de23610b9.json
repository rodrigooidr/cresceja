{"ast":null,"code":"var _jsxFileName = \"C:\\\\Projetos App\\\\cresceja\\\\frontend\\\\src\\\\pages\\\\Omnichannel\\\\ChatPage.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$(),\n  _s4 = $RefreshSig$();\n// src/pages/Omnichannel/ChatPage.jsx\n// Omnichannel Chat â€” pronto para uso\n// - 3 colunas: Inbox/Filas | Thread/Composer | Painel do Cliente\n// - Integra Socket.io (auth por JWT) e REST (fallbacks se API indisponÃ­vel)\n// - Links e aÃ§Ãµes bÃ¡sicas: assumir conversa, enviar mensagem, filtros, busca\n\nimport React, { useEffect, useMemo, useRef, useState } from \"react\";\nimport { io } from \"socket.io-client\";\nimport api from \"../../api/api\";\n\n/** Utilidades **/\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst fmtTime = ts => {\n  try {\n    const d = typeof ts === \"number\" ? new Date(ts) : new Date(ts || Date.now());\n    return d.toLocaleString();\n  } catch {\n    return \"\";\n  }\n};\nconst classNames = (...xs) => xs.filter(Boolean).join(\" \");\nconst useLocalToken = () => {\n  _s();\n  const [token] = useState(() => localStorage.getItem(\"token\") || \"\");\n  return token;\n};\n\n/** Dados de exemplo (fallback quando API nÃ£o responde) **/\n_s(useLocalToken, \"dd2m0R2+oJy9qILHpVn9eE2EimA=\");\nconst SAMPLE_CONVERSATIONS = [{\n  id: \"conv-demo-1\",\n  channel: \"whatsapp\",\n  title: \"Maria Souza\",\n  lastMessage: \"Oi! Quero saber mais do plano Pro\",\n  updatedAt: Date.now() - 1000 * 60 * 5,\n  status: \"pendente\",\n  priority: \"normal\",\n  assignee: null,\n  contact: {\n    id: \"c1\",\n    name: \"Maria Souza\",\n    email: \"maria@exemplo.com\",\n    phone: \"+55 41 99999-9999\"\n  }\n}, {\n  id: \"conv-demo-2\",\n  channel: \"instagram\",\n  title: \"@joaodasilva\",\n  lastMessage: \"Como funciona a integraÃ§Ã£o com WhatsApp?\",\n  updatedAt: Date.now() - 1000 * 60 * 32,\n  status: \"em_andamento\",\n  priority: \"alto\",\n  assignee: \"you\",\n  contact: {\n    id: \"c2\",\n    name: \"JoÃ£o da Silva\",\n    email: \"joao@exemplo.com\",\n    phone: \"\"\n  }\n}];\nconst SAMPLE_MESSAGES = {\n  \"conv-demo-1\": [{\n    id: \"m1\",\n    from: \"contact\",\n    text: \"Oi! Quero saber mais do plano Pro\",\n    at: Date.now() - 1000 * 60 * 8\n  }],\n  \"conv-demo-2\": [{\n    id: \"m2\",\n    from: \"contact\",\n    text: \"Como funciona a integraÃ§Ã£o com WhatsApp?\",\n    at: Date.now() - 1000 * 60 * 35\n  }, {\n    id: \"m3\",\n    from: \"agent\",\n    text: \"Oi JoÃ£o! A integraÃ§Ã£o Ã© direta e vocÃª mantÃ©m seu nÃºmero.\",\n    at: Date.now() - 1000 * 60 * 30\n  }]\n};\n\n/** Quick replies simples **/\nconst QUICK_REPLIES = [\"OlÃ¡! ðŸ‘‹ Como posso te ajudar hoje?\", \"Claro! Vou te explicar rapidinho como funciona.\", \"Pode me confirmar seu nome e e-mail?\", \"Obrigado! JÃ¡ te retorno em instantes. ðŸ™Œ\"];\n\n/** Templates WhatsApp (mock) **/\nconst WA_TEMPLATES = [{\n  id: \"boas_vindas\",\n  name: \"Boas-vindas\",\n  body: \"OlÃ¡ {{nome}}, aqui Ã© da CresceJÃ¡! Posso ajudar?\"\n}, {\n  id: \"followup\",\n  name: \"Follow-up\",\n  body: \"Oi {{nome}}, passando para saber se deu certo. Precisa de algo?\"\n}];\nexport default function ChatPage() {\n  _s2();\n  var _filtered$find;\n  const token = useLocalToken();\n  const [socket, setSocket] = useState(null);\n\n  // Inbox\n  const [conversations, setConversations] = useState([]);\n  const [statusFilter, setStatusFilter] = useState(\"todas\");\n  const [channelFilter, setChannelFilter] = useState(\"todos\");\n  const [search, setSearch] = useState(\"\");\n\n  // SeleÃ§Ã£o\n  const [activeId, setActiveId] = useState(null);\n\n  // Thread\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState(\"\");\n  const [sending, setSending] = useState(false);\n  const threadBottomRef = useRef(null);\n\n  /** Socket setup **/\n  useEffect(() => {\n    if (!token) return;\n    const url = (process.env.REACT_APP_WS_URL || process.env.REACT_APP_API_URL || \"http://localhost:4000\").replace(/^http/, \"ws\");\n    const s = io(url, {\n      transports: [\"websocket\"],\n      auth: {\n        token\n      }\n    });\n    s.on(\"connect\", () => {\n      // console.log(\"WS connected\", s.id);\n      if (activeId) s.emit(\"join:conversation\", activeId);\n    });\n    s.on(\"chat:message\", msg => {\n      // Recebe mensagem em tempo real da conversa ativa\n      setMessages(prev => {\n        if (!activeId || (msg === null || msg === void 0 ? void 0 : msg.conversationId) !== activeId) return prev;\n        return [...prev, {\n          id: `ws-${Date.now()}`,\n          from: msg.from === \"system\" ? \"system\" : msg.from === \"agent\" ? \"agent\" : \"contact\",\n          text: msg.text,\n          at: msg.at\n        }];\n      });\n    });\n    setSocket(s);\n    return () => s.disconnect();\n  }, [token, activeId]);\n\n  /** Carregar conversas (REST com fallback) **/\n  useEffect(() => {\n    let mounted = true;\n    (async () => {\n      try {\n        const qs = [];\n        if (statusFilter !== \"todas\") qs.push(`status=${encodeURIComponent(statusFilter)}`);\n        if (channelFilter !== \"todos\") qs.push(`channel=${encodeURIComponent(channelFilter)}`);\n        if (search) qs.push(`q=${encodeURIComponent(search)}`);\n        const url = `/api/conversations${qs.length ? `?${qs.join(\"&\")}` : \"\"}`;\n        const {\n          data\n        } = await api.get(url);\n        if (!mounted) return;\n        setConversations(Array.isArray(data) ? data : []);\n      } catch {\n        if (!mounted) return;\n        // fallback demo\n        let list = SAMPLE_CONVERSATIONS;\n        if (statusFilter !== \"todas\") list = list.filter(c => c.status === statusFilter);\n        if (channelFilter !== \"todos\") list = list.filter(c => c.channel === channelFilter);\n        if (search) list = list.filter(c => (c.title || \"\").toLowerCase().includes(search.toLowerCase()));\n        setConversations(list);\n      }\n    })();\n    return () => {\n      mounted = false;\n    };\n  }, [statusFilter, channelFilter, search]);\n\n  /** Carregar mensagens da conversa ativa (REST com fallback) **/\n  useEffect(() => {\n    if (!activeId) return setMessages([]);\n    let mounted = true;\n    (async () => {\n      try {\n        const {\n          data\n        } = await api.get(`/api/conversations/${activeId}/messages`);\n        if (!mounted) return;\n        const msgs = Array.isArray(data) ? data.map(m => ({\n          id: m.id,\n          from: m.from || (m.author_role === \"agent\" ? \"agent\" : \"contact\"),\n          text: m.text,\n          at: m.created_at || m.at\n        })) : [];\n        setMessages(msgs);\n        socket === null || socket === void 0 ? void 0 : socket.emit(\"join:conversation\", activeId);\n      } catch {\n        if (!mounted) return;\n        setMessages(SAMPLE_MESSAGES[activeId] || []);\n        socket === null || socket === void 0 ? void 0 : socket.emit(\"join:conversation\", activeId);\n      }\n    })();\n    return () => {\n      mounted = false;\n    };\n  }, [activeId, socket]);\n  useEffect(() => {\n    var _threadBottomRef$curr;\n    // auto-scroll bottom quando novas mensagens chegam\n    (_threadBottomRef$curr = threadBottomRef.current) === null || _threadBottomRef$curr === void 0 ? void 0 : _threadBottomRef$curr.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  }, [messages]);\n  const filtered = useMemo(() => conversations, [conversations]);\n  const sendMessage = async () => {\n    const text = input.trim();\n    if (!text || !activeId) return;\n    setSending(true);\n    try {\n      // Tenta via REST\n      const payload = {\n        text\n      };\n      const url = `/api/conversations/${activeId}/messages`;\n      await api.post(url, payload);\n      setMessages(prev => [...prev, {\n        id: `tmp-${Date.now()}`,\n        from: \"agent\",\n        text,\n        at: Date.now()\n      }]);\n      setInput(\"\");\n    } catch {\n      // Fallback: emite via WS\n      socket === null || socket === void 0 ? void 0 : socket.emit(\"chat:message\", {\n        conversationId: activeId,\n        text\n      });\n      setMessages(prev => [...prev, {\n        id: `tmp-${Date.now()}`,\n        from: \"agent\",\n        text,\n        at: Date.now()\n      }]);\n      setInput(\"\");\n    } finally {\n      setSending(false);\n    }\n  };\n  const assumeConversation = async id => {\n    try {\n      await api.put(`/api/conversations/${id}/assumir`);\n      setConversations(prev => prev.map(c => c.id === id ? {\n        ...c,\n        assignee: \"you\",\n        status: \"em_andamento\"\n      } : c));\n    } catch {\n      setConversations(prev => prev.map(c => c.id === id ? {\n        ...c,\n        assignee: \"you\",\n        status: \"em_andamento\"\n      } : c));\n    }\n  };\n  const endConversation = async id => {\n    try {\n      await api.put(`/api/conversations/${id}/status`, {\n        status: \"resolvida\"\n      });\n    } catch {}\n    setConversations(prev => prev.map(c => c.id === id ? {\n      ...c,\n      status: \"resolvida\"\n    } : c));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"h-[calc(100vh-0px)] w-full grid grid-cols-1 md:grid-cols-10\",\n    children: [/*#__PURE__*/_jsxDEV(\"aside\", {\n      className: \"md:col-span-3 border-r flex flex-col min-h-0\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-3 border-b\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"select\", {\n            value: statusFilter,\n            onChange: e => setStatusFilter(e.target.value),\n            className: \"border rounded-lg px-2 py-1 text-sm\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"todas\",\n              children: \"Todas\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"pendente\",\n              children: \"Pendente\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 235,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"nao_atribuido\",\n              children: \"N\\xE3o atribu\\xEDdo\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 236,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"em_andamento\",\n              children: \"Em andamento\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 237,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"resolvida\",\n              children: \"Resolvida\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 238,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: channelFilter,\n            onChange: e => setChannelFilter(e.target.value),\n            className: \"border rounded-lg px-2 py-1 text-sm\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"todos\",\n              children: \"Todos os canais\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 241,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"whatsapp\",\n              children: \"WhatsApp\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 242,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"instagram\",\n              children: \"Instagram\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 243,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"facebook\",\n              children: \"Facebook\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 244,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"mt-2 w-full border rounded-lg px-3 py-2 text-sm\",\n          placeholder: \"Buscar nome, n\\xFAmero, e-mail...\",\n          value: search,\n          onChange: e => setSearch(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-1 overflow-auto\",\n        children: [filtered.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-4 text-sm text-gray-500\",\n          children: \"Nenhuma conversa encontrada.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: filtered.map(c => {\n            var _c$contact;\n            return /*#__PURE__*/_jsxDEV(\"li\", {\n              className: classNames(\"px-3 py-2 border-b cursor-pointer hover:bg-gray-50\", activeId === c.id && \"bg-blue-50\"),\n              onClick: () => setActiveId(c.id),\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"font-medium truncate max-w-[70%]\",\n                  children: c.title || ((_c$contact = c.contact) === null || _c$contact === void 0 ? void 0 : _c$contact.name) || c.id\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 270,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-xs text-gray-500 ml-2\",\n                  children: fmtTime(c.updatedAt)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 271,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 269,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-xs text-gray-500 truncate\",\n                children: c.lastMessage\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 273,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mt-1 flex items-center gap-2 text-[11px]\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: classNames(\"px-2 py-0.5 rounded-full\", c.status === \"pendente\" && \"bg-amber-100 text-amber-700\", c.status === \"em_andamento\" && \"bg-blue-100 text-blue-700\", c.status === \"resolvida\" && \"bg-emerald-100 text-emerald-700\"),\n                  children: c.status || \"\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 275,\n                  columnNumber: 19\n                }, this), c.assignee ? /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"px-2 py-0.5 rounded-full bg-gray-100 text-gray-700\",\n                  children: \"atribu\\xEDdo\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 282,\n                  columnNumber: 21\n                }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: e => {\n                    e.stopPropagation();\n                    assumeConversation(c.id);\n                  },\n                  className: \"text-xs px-2 py-0.5 rounded-full bg-blue-600 text-white hover:bg-blue-700\",\n                  children: \"Assumir\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 284,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 274,\n                columnNumber: 17\n              }, this)]\n            }, c.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 15\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"md:col-span-4 flex flex-col min-h-0\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-3 border-b flex items-center justify-between\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"font-semibold\",\n          children: activeId ? ((_filtered$find = filtered.find(c => c.id === activeId)) === null || _filtered$find === void 0 ? void 0 : _filtered$find.title) || activeId : \"Selecione uma conversa\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 11\n        }, this), activeId && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-2\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => endConversation(activeId),\n            className: \"px-3 py-1 text-sm rounded-lg border hover:bg-gray-50\",\n            children: \"Encerrar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 305,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 301,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-1 overflow-auto p-4 space-y-2 bg-white\",\n        children: [!activeId && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-sm text-gray-500\",\n          children: \"Escolha uma conversa na lista \\xE0 esquerda.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 25\n        }, this), activeId && messages.map(m => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classNames(\"max-w-[75%]\", m.from === \"agent\" ? \"ml-auto\" : \"\"),\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: classNames(\"rounded-2xl px-3 py-2 shadow-sm border\", m.from === \"agent\" ? \"bg-blue-600 text-white border-blue-600\" : \"bg-gray-50\"),\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"whitespace-pre-wrap text-sm\",\n              children: m.text\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 319,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 315,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-[11px] text-gray-500 mt-1 {m.from === 'agent' ? 'text-right' : ''}\",\n            children: fmtTime(m.at)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 321,\n            columnNumber: 15\n          }, this)]\n        }, m.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 13\n        }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: threadBottomRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"border-t p-3 bg-white\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-2 mb-2\",\n          children: [/*#__PURE__*/_jsxDEV(TemplatesDropdown, {\n            onPick: t => setInput(prev => prev ? prev + \"\\n\" + t.body : t.body)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 330,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(QuickReplies, {\n            onPick: q => setInput(prev => prev ? prev + \"\\n\" + q : q)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-end gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n            rows: 2,\n            className: \"flex-1 border rounded-xl px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-200\",\n            placeholder: activeId ? \"Escreva sua resposta...\" : \"Selecione uma conversa para responder\",\n            value: input,\n            onChange: e => setInput(e.target.value),\n            onKeyDown: e => {\n              if (e.key === \"Enter\" && (e.ctrlKey || e.metaKey)) {\n                e.preventDefault();\n                sendMessage();\n              }\n            },\n            disabled: !activeId\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 334,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: sendMessage,\n            disabled: !activeId || sending || !input.trim(),\n            className: \"px-4 py-2 rounded-xl bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-60\",\n            children: sending ? \"Enviando...\" : \"Enviar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 348,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-[11px] text-gray-500 mt-1\",\n          children: \"Dica: Ctrl+Enter envia\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 356,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"aside\", {\n      className: \"md:col-span-3 border-l flex flex-col min-h-0\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-3 border-b font-semibold\",\n        children: \"Cliente & CRM\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 362,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-3 space-y-3 overflow-auto\",\n        children: [!activeId && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-sm text-gray-500\",\n          children: \"Selecione uma conversa para ver os detalhes.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 25\n        }, this), activeId && /*#__PURE__*/_jsxDEV(CustomerCard, {\n          conv: filtered.find(c => c.id === activeId)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 366,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 363,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 361,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 228,\n    columnNumber: 5\n  }, this);\n}\n\n/** Componentes auxiliares **/\n_s2(ChatPage, \"UeViYbHJRCocJrvVhFSrcGyaeS8=\", false, function () {\n  return [useLocalToken];\n});\n_c = ChatPage;\nfunction TemplatesDropdown({\n  onPick\n}) {\n  _s3();\n  const [open, setOpen] = useState(false);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"relative\",\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => setOpen(v => !v),\n      className: \"px-3 py-1.5 text-sm border rounded-lg hover:bg-gray-50\",\n      children: \"Templates\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 379,\n      columnNumber: 7\n    }, this), open && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute z-10 mt-1 w-64 bg-white border rounded-lg shadow\",\n      children: WA_TEMPLATES.map(t => /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          onPick(t);\n          setOpen(false);\n        },\n        className: \"w-full text-left px-3 py-2 text-sm hover:bg-gray-50\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"font-medium\",\n          children: t.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 390,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-xs text-gray-500 truncate\",\n          children: t.body\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 391,\n          columnNumber: 15\n        }, this)]\n      }, t.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 385,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 383,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 378,\n    columnNumber: 5\n  }, this);\n}\n_s3(TemplatesDropdown, \"xG1TONbKtDWtdOTrXaTAsNhPg/Q=\");\n_c2 = TemplatesDropdown;\nfunction QuickReplies({\n  onPick\n}) {\n  _s4();\n  const [open, setOpen] = useState(false);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"relative\",\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => setOpen(v => !v),\n      className: \"px-3 py-1.5 text-sm border rounded-lg hover:bg-gray-50\",\n      children: \"Respostas r\\xE1pidas\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 404,\n      columnNumber: 7\n    }, this), open && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute z-10 mt-1 w-64 bg-white border rounded-lg shadow max-h-60 overflow-auto\",\n      children: QUICK_REPLIES.map((q, i) => /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          onPick(q);\n          setOpen(false);\n        },\n        className: \"w-full text-left px-3 py-2 text-sm hover:bg-gray-50\",\n        children: q\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 410,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 408,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 403,\n    columnNumber: 5\n  }, this);\n}\n_s4(QuickReplies, \"xG1TONbKtDWtdOTrXaTAsNhPg/Q=\");\n_c3 = QuickReplies;\nfunction CustomerCard({\n  conv\n}) {\n  if (!conv) return null;\n  const c = conv.contact || {};\n  const fields = [{\n    label: \"Nome\",\n    value: c.name || conv.title || \"-\"\n  }, {\n    label: \"E-mail\",\n    value: c.email || \"-\"\n  }, {\n    label: \"WhatsApp\",\n    value: c.phone || \"-\"\n  }, {\n    label: \"Canal\",\n    value: conv.channel || \"-\"\n  }, {\n    label: \"Status\",\n    value: conv.status || \"-\"\n  }, {\n    label: \"Atualizado\",\n    value: fmtTime(conv.updatedAt)\n  }];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"border rounded-2xl p-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"font-semibold\",\n      children: \"Perfil\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 434,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-2 grid grid-cols-1 gap-2 text-sm\",\n      children: fields.map(f => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-gray-500\",\n          children: f.label\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 438,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"font-medium text-right ml-3 truncate max-w-[60%]\",\n          children: f.value\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 439,\n          columnNumber: 13\n        }, this)]\n      }, f.label, true, {\n        fileName: _jsxFileName,\n        lineNumber: 437,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 435,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-4 border-t pt-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"font-semibold\",\n        children: \"A\\xE7\\xF5es r\\xE1pidas\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 445,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-2 flex flex-wrap gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"px-3 py-1.5 text-sm rounded-lg border hover:bg-gray-50\",\n          children: \"Criar oportunidade\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 447,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"px-3 py-1.5 text-sm rounded-lg border hover:bg-gray-50\",\n          children: \"Agendar follow-up\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 448,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"px-3 py-1.5 text-sm rounded-lg border hover:bg-gray-50\",\n          children: \"Aplicar tag\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 449,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 446,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 444,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 433,\n    columnNumber: 5\n  }, this);\n}\n_c4 = CustomerCard;\nvar _c, _c2, _c3, _c4;\n$RefreshReg$(_c, \"ChatPage\");\n$RefreshReg$(_c2, \"TemplatesDropdown\");\n$RefreshReg$(_c3, \"QuickReplies\");\n$RefreshReg$(_c4, \"CustomerCard\");","map":{"version":3,"names":["React","useEffect","useMemo","useRef","useState","io","api","jsxDEV","_jsxDEV","fmtTime","ts","d","Date","now","toLocaleString","classNames","xs","filter","Boolean","join","useLocalToken","_s","token","localStorage","getItem","SAMPLE_CONVERSATIONS","id","channel","title","lastMessage","updatedAt","status","priority","assignee","contact","name","email","phone","SAMPLE_MESSAGES","from","text","at","QUICK_REPLIES","WA_TEMPLATES","body","ChatPage","_s2","_filtered$find","socket","setSocket","conversations","setConversations","statusFilter","setStatusFilter","channelFilter","setChannelFilter","search","setSearch","activeId","setActiveId","messages","setMessages","input","setInput","sending","setSending","threadBottomRef","url","process","env","REACT_APP_WS_URL","REACT_APP_API_URL","replace","s","transports","auth","on","emit","msg","prev","conversationId","disconnect","mounted","qs","push","encodeURIComponent","length","data","get","Array","isArray","list","c","toLowerCase","includes","msgs","map","m","author_role","created_at","_threadBottomRef$curr","current","scrollIntoView","behavior","filtered","sendMessage","trim","payload","post","assumeConversation","put","endConversation","className","children","value","onChange","e","target","fileName","_jsxFileName","lineNumber","columnNumber","placeholder","_c$contact","onClick","stopPropagation","find","ref","TemplatesDropdown","onPick","t","QuickReplies","q","rows","onKeyDown","key","ctrlKey","metaKey","preventDefault","disabled","CustomerCard","conv","_c","_s3","open","setOpen","v","_c2","_s4","i","_c3","fields","label","f","_c4","$RefreshReg$"],"sources":["C:/Projetos App/cresceja/frontend/src/pages/Omnichannel/ChatPage.jsx"],"sourcesContent":["// src/pages/Omnichannel/ChatPage.jsx\n// Omnichannel Chat â€” pronto para uso\n// - 3 colunas: Inbox/Filas | Thread/Composer | Painel do Cliente\n// - Integra Socket.io (auth por JWT) e REST (fallbacks se API indisponÃ­vel)\n// - Links e aÃ§Ãµes bÃ¡sicas: assumir conversa, enviar mensagem, filtros, busca\n\nimport React, { useEffect, useMemo, useRef, useState } from \"react\";\nimport { io } from \"socket.io-client\";\nimport api from \"../../api/api\";\n\n/** Utilidades **/\nconst fmtTime = (ts) => {\n  try {\n    const d = typeof ts === \"number\" ? new Date(ts) : new Date(ts || Date.now());\n    return d.toLocaleString();\n  } catch {\n    return \"\";\n  }\n};\n\nconst classNames = (...xs) => xs.filter(Boolean).join(\" \");\n\nconst useLocalToken = () => {\n  const [token] = useState(() => localStorage.getItem(\"token\") || \"\");\n  return token;\n};\n\n/** Dados de exemplo (fallback quando API nÃ£o responde) **/\nconst SAMPLE_CONVERSATIONS = [\n  {\n    id: \"conv-demo-1\",\n    channel: \"whatsapp\",\n    title: \"Maria Souza\",\n    lastMessage: \"Oi! Quero saber mais do plano Pro\",\n    updatedAt: Date.now() - 1000 * 60 * 5,\n    status: \"pendente\",\n    priority: \"normal\",\n    assignee: null,\n    contact: {\n      id: \"c1\",\n      name: \"Maria Souza\",\n      email: \"maria@exemplo.com\",\n      phone: \"+55 41 99999-9999\",\n    },\n  },\n  {\n    id: \"conv-demo-2\",\n    channel: \"instagram\",\n    title: \"@joaodasilva\",\n    lastMessage: \"Como funciona a integraÃ§Ã£o com WhatsApp?\",\n    updatedAt: Date.now() - 1000 * 60 * 32,\n    status: \"em_andamento\",\n    priority: \"alto\",\n    assignee: \"you\",\n    contact: {\n      id: \"c2\",\n      name: \"JoÃ£o da Silva\",\n      email: \"joao@exemplo.com\",\n      phone: \"\",\n    },\n  },\n];\n\nconst SAMPLE_MESSAGES = {\n  \"conv-demo-1\": [\n    { id: \"m1\", from: \"contact\", text: \"Oi! Quero saber mais do plano Pro\", at: Date.now() - 1000 * 60 * 8 },\n  ],\n  \"conv-demo-2\": [\n    { id: \"m2\", from: \"contact\", text: \"Como funciona a integraÃ§Ã£o com WhatsApp?\", at: Date.now() - 1000 * 60 * 35 },\n    { id: \"m3\", from: \"agent\", text: \"Oi JoÃ£o! A integraÃ§Ã£o Ã© direta e vocÃª mantÃ©m seu nÃºmero.\", at: Date.now() - 1000 * 60 * 30 },\n  ],\n};\n\n/** Quick replies simples **/\nconst QUICK_REPLIES = [\n  \"OlÃ¡! ðŸ‘‹ Como posso te ajudar hoje?\",\n  \"Claro! Vou te explicar rapidinho como funciona.\",\n  \"Pode me confirmar seu nome e e-mail?\",\n  \"Obrigado! JÃ¡ te retorno em instantes. ðŸ™Œ\",\n];\n\n/** Templates WhatsApp (mock) **/\nconst WA_TEMPLATES = [\n  { id: \"boas_vindas\", name: \"Boas-vindas\", body: \"OlÃ¡ {{nome}}, aqui Ã© da CresceJÃ¡! Posso ajudar?\" },\n  { id: \"followup\", name: \"Follow-up\", body: \"Oi {{nome}}, passando para saber se deu certo. Precisa de algo?\" },\n];\n\nexport default function ChatPage() {\n  const token = useLocalToken();\n  const [socket, setSocket] = useState(null);\n\n  // Inbox\n  const [conversations, setConversations] = useState([]);\n  const [statusFilter, setStatusFilter] = useState(\"todas\");\n  const [channelFilter, setChannelFilter] = useState(\"todos\");\n  const [search, setSearch] = useState(\"\");\n\n  // SeleÃ§Ã£o\n  const [activeId, setActiveId] = useState(null);\n\n  // Thread\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState(\"\");\n  const [sending, setSending] = useState(false);\n\n  const threadBottomRef = useRef(null);\n\n  /** Socket setup **/\n  useEffect(() => {\n    if (!token) return;\n    const url = (process.env.REACT_APP_WS_URL || process.env.REACT_APP_API_URL || \"http://localhost:4000\").replace(/^http/, \"ws\");\n\n    const s = io(url, {\n      transports: [\"websocket\"],\n      auth: { token },\n    });\n\n    s.on(\"connect\", () => {\n      // console.log(\"WS connected\", s.id);\n      if (activeId) s.emit(\"join:conversation\", activeId);\n    });\n\n    s.on(\"chat:message\", (msg) => {\n      // Recebe mensagem em tempo real da conversa ativa\n      setMessages((prev) => {\n        if (!activeId || msg?.conversationId !== activeId) return prev;\n        return [...prev, { id: `ws-${Date.now()}`, from: msg.from === \"system\" ? \"system\" : msg.from === \"agent\" ? \"agent\" : \"contact\", text: msg.text, at: msg.at }];\n      });\n    });\n\n    setSocket(s);\n    return () => s.disconnect();\n  }, [token, activeId]);\n\n  /** Carregar conversas (REST com fallback) **/\n  useEffect(() => {\n    let mounted = true;\n    (async () => {\n      try {\n        const qs = [];\n        if (statusFilter !== \"todas\") qs.push(`status=${encodeURIComponent(statusFilter)}`);\n        if (channelFilter !== \"todos\") qs.push(`channel=${encodeURIComponent(channelFilter)}`);\n        if (search) qs.push(`q=${encodeURIComponent(search)}`);\n        const url = `/api/conversations${qs.length ? `?${qs.join(\"&\")}` : \"\"}`;\n        const { data } = await api.get(url);\n        if (!mounted) return;\n        setConversations(Array.isArray(data) ? data : []);\n      } catch {\n        if (!mounted) return;\n        // fallback demo\n        let list = SAMPLE_CONVERSATIONS;\n        if (statusFilter !== \"todas\") list = list.filter((c) => c.status === statusFilter);\n        if (channelFilter !== \"todos\") list = list.filter((c) => c.channel === channelFilter);\n        if (search) list = list.filter((c) => (c.title || \"\").toLowerCase().includes(search.toLowerCase()));\n        setConversations(list);\n      }\n    })();\n    return () => { mounted = false; };\n  }, [statusFilter, channelFilter, search]);\n\n  /** Carregar mensagens da conversa ativa (REST com fallback) **/\n  useEffect(() => {\n    if (!activeId) return setMessages([]);\n    let mounted = true;\n    (async () => {\n      try {\n        const { data } = await api.get(`/api/conversations/${activeId}/messages`);\n        if (!mounted) return;\n        const msgs = Array.isArray(data)\n          ? data.map((m) => ({ id: m.id, from: m.from || (m.author_role === \"agent\" ? \"agent\" : \"contact\"), text: m.text, at: m.created_at || m.at }))\n          : [];\n        setMessages(msgs);\n        socket?.emit(\"join:conversation\", activeId);\n      } catch {\n        if (!mounted) return;\n        setMessages(SAMPLE_MESSAGES[activeId] || []);\n        socket?.emit(\"join:conversation\", activeId);\n      }\n    })();\n    return () => { mounted = false; };\n  }, [activeId, socket]);\n\n  useEffect(() => {\n    // auto-scroll bottom quando novas mensagens chegam\n    threadBottomRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  }, [messages]);\n\n  const filtered = useMemo(() => conversations, [conversations]);\n\n  const sendMessage = async () => {\n    const text = input.trim();\n    if (!text || !activeId) return;\n    setSending(true);\n    try {\n      // Tenta via REST\n      const payload = { text };\n      const url = `/api/conversations/${activeId}/messages`;\n      await api.post(url, payload);\n      setMessages((prev) => [...prev, { id: `tmp-${Date.now()}`, from: \"agent\", text, at: Date.now() }]);\n      setInput(\"\");\n    } catch {\n      // Fallback: emite via WS\n      socket?.emit(\"chat:message\", { conversationId: activeId, text });\n      setMessages((prev) => [...prev, { id: `tmp-${Date.now()}`, from: \"agent\", text, at: Date.now() }]);\n      setInput(\"\");\n    } finally {\n      setSending(false);\n    }\n  };\n\n  const assumeConversation = async (id) => {\n    try {\n      await api.put(`/api/conversations/${id}/assumir`);\n      setConversations((prev) => prev.map((c) => (c.id === id ? { ...c, assignee: \"you\", status: \"em_andamento\" } : c)));\n    } catch {\n      setConversations((prev) => prev.map((c) => (c.id === id ? { ...c, assignee: \"you\", status: \"em_andamento\" } : c)));\n    }\n  };\n\n  const endConversation = async (id) => {\n    try {\n      await api.put(`/api/conversations/${id}/status`, { status: \"resolvida\" });\n    } catch {}\n    setConversations((prev) => prev.map((c) => (c.id === id ? { ...c, status: \"resolvida\" } : c)));\n  };\n\n  return (\n    <div className=\"h-[calc(100vh-0px)] w-full grid grid-cols-1 md:grid-cols-10\">\n      {/* Coluna 1 â€” Inbox/Filas */}\n      <aside className=\"md:col-span-3 border-r flex flex-col min-h-0\">\n        <div className=\"p-3 border-b\">\n          <div className=\"flex gap-2\">\n            <select value={statusFilter} onChange={(e) => setStatusFilter(e.target.value)} className=\"border rounded-lg px-2 py-1 text-sm\">\n              <option value=\"todas\">Todas</option>\n              <option value=\"pendente\">Pendente</option>\n              <option value=\"nao_atribuido\">NÃ£o atribuÃ­do</option>\n              <option value=\"em_andamento\">Em andamento</option>\n              <option value=\"resolvida\">Resolvida</option>\n            </select>\n            <select value={channelFilter} onChange={(e) => setChannelFilter(e.target.value)} className=\"border rounded-lg px-2 py-1 text-sm\">\n              <option value=\"todos\">Todos os canais</option>\n              <option value=\"whatsapp\">WhatsApp</option>\n              <option value=\"instagram\">Instagram</option>\n              <option value=\"facebook\">Facebook</option>\n            </select>\n          </div>\n          <input\n            className=\"mt-2 w-full border rounded-lg px-3 py-2 text-sm\"\n            placeholder=\"Buscar nome, nÃºmero, e-mail...\"\n            value={search}\n            onChange={(e) => setSearch(e.target.value)}\n          />\n        </div>\n\n        <div className=\"flex-1 overflow-auto\">\n          {filtered.length === 0 && (\n            <div className=\"p-4 text-sm text-gray-500\">Nenhuma conversa encontrada.</div>\n          )}\n          <ul>\n            {filtered.map((c) => (\n              <li\n                key={c.id}\n                className={classNames(\n                  \"px-3 py-2 border-b cursor-pointer hover:bg-gray-50\",\n                  activeId === c.id && \"bg-blue-50\"\n                )}\n                onClick={() => setActiveId(c.id)}\n              >\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"font-medium truncate max-w-[70%]\">{c.title || c.contact?.name || c.id}</div>\n                  <div className=\"text-xs text-gray-500 ml-2\">{fmtTime(c.updatedAt)}</div>\n                </div>\n                <div className=\"text-xs text-gray-500 truncate\">{c.lastMessage}</div>\n                <div className=\"mt-1 flex items-center gap-2 text-[11px]\">\n                  <span className={classNames(\n                    \"px-2 py-0.5 rounded-full\",\n                    c.status === \"pendente\" && \"bg-amber-100 text-amber-700\",\n                    c.status === \"em_andamento\" && \"bg-blue-100 text-blue-700\",\n                    c.status === \"resolvida\" && \"bg-emerald-100 text-emerald-700\"\n                  )}>{c.status || \"\"}</span>\n                  {c.assignee ? (\n                    <span className=\"px-2 py-0.5 rounded-full bg-gray-100 text-gray-700\">atribuÃ­do</span>\n                  ) : (\n                    <button\n                      onClick={(e) => { e.stopPropagation(); assumeConversation(c.id); }}\n                      className=\"text-xs px-2 py-0.5 rounded-full bg-blue-600 text-white hover:bg-blue-700\"\n                    >\n                      Assumir\n                    </button>\n                  )}\n                </div>\n              </li>\n            ))}\n          </ul>\n        </div>\n      </aside>\n\n      {/* Coluna 2 â€” Thread/Composer */}\n      <main className=\"md:col-span-4 flex flex-col min-h-0\">\n        {/* Header da conversa */}\n        <div className=\"p-3 border-b flex items-center justify-between\">\n          <div className=\"font-semibold\">{activeId ? (filtered.find((c) => c.id === activeId)?.title || activeId) : \"Selecione uma conversa\"}</div>\n          {activeId && (\n            <div className=\"flex items-center gap-2\">\n              <button onClick={() => endConversation(activeId)} className=\"px-3 py-1 text-sm rounded-lg border hover:bg-gray-50\">Encerrar</button>\n            </div>\n          )}\n        </div>\n\n        {/* Mensagens */}\n        <div className=\"flex-1 overflow-auto p-4 space-y-2 bg-white\">\n          {!activeId && <div className=\"text-sm text-gray-500\">Escolha uma conversa na lista Ã  esquerda.</div>}\n          {activeId && messages.map((m) => (\n            <div key={m.id} className={classNames(\"max-w-[75%]\", m.from === \"agent\" ? \"ml-auto\" : \"\")}>\n              <div className={classNames(\n                \"rounded-2xl px-3 py-2 shadow-sm border\",\n                m.from === \"agent\" ? \"bg-blue-600 text-white border-blue-600\" : \"bg-gray-50\"\n              )}>\n                <div className=\"whitespace-pre-wrap text-sm\">{m.text}</div>\n              </div>\n              <div className=\"text-[11px] text-gray-500 mt-1 {m.from === 'agent' ? 'text-right' : ''}\">{fmtTime(m.at)}</div>\n            </div>\n          ))}\n          <div ref={threadBottomRef} />\n        </div>\n\n        {/* Composer */}\n        <div className=\"border-t p-3 bg-white\">\n          <div className=\"flex items-center gap-2 mb-2\">\n            <TemplatesDropdown onPick={(t) => setInput((prev) => prev ? prev + \"\\n\" + t.body : t.body)} />\n            <QuickReplies onPick={(q) => setInput((prev) => prev ? prev + \"\\n\" + q : q)} />\n          </div>\n          <div className=\"flex items-end gap-2\">\n            <textarea\n              rows={2}\n              className=\"flex-1 border rounded-xl px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-200\"\n              placeholder={activeId ? \"Escreva sua resposta...\" : \"Selecione uma conversa para responder\"}\n              value={input}\n              onChange={(e) => setInput(e.target.value)}\n              onKeyDown={(e) => {\n                if (e.key === \"Enter\" && (e.ctrlKey || e.metaKey)) {\n                  e.preventDefault();\n                  sendMessage();\n                }\n              }}\n              disabled={!activeId}\n            />\n            <button\n              onClick={sendMessage}\n              disabled={!activeId || sending || !input.trim()}\n              className=\"px-4 py-2 rounded-xl bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-60\"\n            >\n              {sending ? \"Enviando...\" : \"Enviar\"}\n            </button>\n          </div>\n          <div className=\"text-[11px] text-gray-500 mt-1\">Dica: Ctrl+Enter envia</div>\n        </div>\n      </main>\n\n      {/* Coluna 3 â€” Painel do Cliente/CRM */}\n      <aside className=\"md:col-span-3 border-l flex flex-col min-h-0\">\n        <div className=\"p-3 border-b font-semibold\">Cliente & CRM</div>\n        <div className=\"p-3 space-y-3 overflow-auto\">\n          {!activeId && <div className=\"text-sm text-gray-500\">Selecione uma conversa para ver os detalhes.</div>}\n          {activeId && (\n            <CustomerCard conv={filtered.find((c) => c.id === activeId)} />\n          )}\n        </div>\n      </aside>\n    </div>\n  );\n}\n\n/** Componentes auxiliares **/\nfunction TemplatesDropdown({ onPick }) {\n  const [open, setOpen] = useState(false);\n  return (\n    <div className=\"relative\">\n      <button onClick={() => setOpen((v) => !v)} className=\"px-3 py-1.5 text-sm border rounded-lg hover:bg-gray-50\">\n        Templates\n      </button>\n      {open && (\n        <div className=\"absolute z-10 mt-1 w-64 bg-white border rounded-lg shadow\">\n          {WA_TEMPLATES.map((t) => (\n            <button\n              key={t.id}\n              onClick={() => { onPick(t); setOpen(false); }}\n              className=\"w-full text-left px-3 py-2 text-sm hover:bg-gray-50\"\n            >\n              <div className=\"font-medium\">{t.name}</div>\n              <div className=\"text-xs text-gray-500 truncate\">{t.body}</div>\n            </button>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n\nfunction QuickReplies({ onPick }) {\n  const [open, setOpen] = useState(false);\n  return (\n    <div className=\"relative\">\n      <button onClick={() => setOpen((v) => !v)} className=\"px-3 py-1.5 text-sm border rounded-lg hover:bg-gray-50\">\n        Respostas rÃ¡pidas\n      </button>\n      {open && (\n        <div className=\"absolute z-10 mt-1 w-64 bg-white border rounded-lg shadow max-h-60 overflow-auto\">\n          {QUICK_REPLIES.map((q, i) => (\n            <button key={i} onClick={() => { onPick(q); setOpen(false); }} className=\"w-full text-left px-3 py-2 text-sm hover:bg-gray-50\">\n              {q}\n            </button>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n\nfunction CustomerCard({ conv }) {\n  if (!conv) return null;\n  const c = conv.contact || {};\n  const fields = [\n    { label: \"Nome\", value: c.name || conv.title || \"-\" },\n    { label: \"E-mail\", value: c.email || \"-\" },\n    { label: \"WhatsApp\", value: c.phone || \"-\" },\n    { label: \"Canal\", value: conv.channel || \"-\" },\n    { label: \"Status\", value: conv.status || \"-\" },\n    { label: \"Atualizado\", value: fmtTime(conv.updatedAt) },\n  ];\n\n  return (\n    <div className=\"border rounded-2xl p-4\">\n      <div className=\"font-semibold\">Perfil</div>\n      <div className=\"mt-2 grid grid-cols-1 gap-2 text-sm\">\n        {fields.map((f) => (\n          <div key={f.label} className=\"flex items-center justify-between\">\n            <div className=\"text-gray-500\">{f.label}</div>\n            <div className=\"font-medium text-right ml-3 truncate max-w-[60%]\">{f.value}</div>\n          </div>\n        ))}\n      </div>\n\n      <div className=\"mt-4 border-t pt-3\">\n        <div className=\"font-semibold\">AÃ§Ãµes rÃ¡pidas</div>\n        <div className=\"mt-2 flex flex-wrap gap-2\">\n          <button className=\"px-3 py-1.5 text-sm rounded-lg border hover:bg-gray-50\">Criar oportunidade</button>\n          <button className=\"px-3 py-1.5 text-sm rounded-lg border hover:bg-gray-50\">Agendar follow-up</button>\n          <button className=\"px-3 py-1.5 text-sm rounded-lg border hover:bg-gray-50\">Aplicar tag</button>\n        </div>\n      </div>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}